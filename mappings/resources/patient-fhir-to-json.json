{
	"id": "patient-fhir-to-json-v1",
	"name": "Patient FHIR to JSON Mapping",
	"version": "1.0.0",
	"direction": "FHIR_TO_JSON",
	"sourceType": "Patient",
	"targetType": "PatientDTO",
	"fieldMappings": [
		{
			"id": "patient-id",
			"sourcePath": "identifier[0].value",
			"targetPath": "patientId",
			"dataType": "string",
			"required": true
		},
		{
			"id": "patient-lastname",
			"sourcePath": "name[0].family",
			"targetPath": "lastName",
			"dataType": "string",
			"required": true
		},
		{
			"id": "patient-firstname",
			"sourcePath": "name[0].given[0]",
			"targetPath": "firstName",
			"dataType": "string",
			"required": true
		},
		{
			"id": "patient-gender-reverse",
			"sourcePath": "gender",
			"targetPath": "gender",
			"dataType": "code",
			"lookupTable": "gender-lookup-reverse",
			"required": true,
			"description": "Converts male->M, female->F (separate reverse lookup)"
		},
		{
			"id": "patient-dob",
			"sourcePath": "birthDate",
			"targetPath": "dateOfBirth",
			"dataType": "date",
			"required": false,
			"description": "Direct copy, no transform needed"
		},
		{
			"id": "patient-org-id",
			"sourcePath": "managingOrganization.reference",
			"targetPath": "organizationId",
			"dataType": "string",
			"transformExpression": "fn:replace(value, 'Organization/', '')",
			"condition": "managingOrganization != null",
			"required": false,
			"description": "Extract ID from reference"
		}
	]
}